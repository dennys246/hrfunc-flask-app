{% extends "base.html" %}

{% block title %}Home | HRfunc{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const docEl = document.documentElement;
      const hero = document.querySelector('.index-hero');
      const header = document.querySelector('.site-header');
      const footer = document.querySelector('.site-footer');

      function syncHeroHeight() {
        const headerHeight = header && header.offsetHeight ? header.offsetHeight : 0;
        const footerHeight = footer && footer.offsetHeight ? footer.offsetHeight : 0;
        const viewportHeight = window.innerHeight || docEl.clientHeight || 0;
        const chromeHeight = headerHeight + footerHeight;

        docEl.style.setProperty('--chrome-height', `${chromeHeight}px`);
        docEl.style.setProperty('--vh', `${viewportHeight * 0.01}px`);

        const targetHeight = Math.max(viewportHeight - chromeHeight, 420);

        if (hero) {
          hero.style.minHeight = `${targetHeight}px`;
        }
      }

      syncHeroHeight();
      window.addEventListener('load', syncHeroHeight, { once: true });
      window.addEventListener('resize', syncHeroHeight, { passive: true });
      window.addEventListener('orientationchange', syncHeroHeight);
      window.addEventListener('pageshow', (event) => {
        if (event.persisted) {
          syncHeroHeight();
        }
      });
      window.setTimeout(syncHeroHeight, 150);

      const aboutCard = document.querySelector('#about-card');
      if (!aboutCard || !('IntersectionObserver' in window)) {
          if (aboutCard) {
              aboutCard.classList.add('is-visible');
          }
          return;
      }
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.2 });
      observer.observe(aboutCard);
    });
  </script>
{% endblock %}

{% block content %}
<div class="index-bg" aria-hidden="true" style="background-image: url('{{ url_for('static', filename='img/fnirs_channel_data_2_transparent_new.png') }}');"></div>
<img class="index-bg-fg" src="{{ url_for('static', filename='img/fnirs_channel_data_2_transparent_new.png') }}" alt="" aria-hidden="true" decoding="async">

<section class="index-hero text-center text-gray-100 flex flex-col items-center justify-center">
  <h1 class="text-5xl font-extrabold leading-tight">
    Hemodynamics and Neural Activity<br> Illuminated
  </h1>
</section>

<section id="about" class="about-section relative px-4 sm:px-6 md:px-10 pt-10 pb-32 flex justify-center">
  <div id="about-card" class="bg-white/85 dark:bg-slate-900/70 rounded-3xl shadow-2xl border border-indigo-100/60 dark:border-indigo-900/60 backdrop-blur-sm transition-all duration-700 ease-out">
    <div class="px-6 sm:px-10 py-12">
      {% include "partials/about_section.html" %}
    </div>
  </div>
</section>
{% endblock %}
